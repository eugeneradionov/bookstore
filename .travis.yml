sudo: false
language: ruby
rvm:
- 2.4.1
env:
  secure: F1lliR5t1MuGvNohN35ssgX5z4KylK9oAGm79KdPd8DF7m+ImDqDb8S2Rywl9pNGpw0dMlrZiBpGb8qdOVD+VOJJa3voS26UYDs4nxOEq4slzWQPK+475FUh9ZAN4zJIvmbZm8VWNz79i2iagRZuyQ3cWmdjuvTpyk/d8Li7rC5HEIa/hveBAMi2g3yZZ1DxD598uILvvk1S31GAVILS/xxmuBp1A9QlRpbQU/duKGMk2aSDxrqFVKuZN8+1Sa1QnlavZcmtt3vhWaI9HxcOrQTOsLhady7lmkI8YOpDQYLHmbsofowabi7ratShPSZ3R1Ke7ynEMV7QBAZTSxWkUQOzyjpR+WCbzBW2Y0+fS6gnGRIjZusWqNUyD/Ue6vtVh+k71oPIgWtwMflxH5uQgsgE3lc6/wOgehuiY7ssqU/pLTOZr91BxDq0Cg9vUfHUUBzwVIqGe1mJ3PE1iZyBDJRZMoy66JNJjuMvs6VluU/Jb2Q4AwM/VrDiA2aioWONJWPpcjPZ7ys4+E5vrEfdMXawrBmKgERPe8AYi6H+Ovsh1aS7cFfHxrahM8h0pSxdkb7K3ECSa6c3ZDT8MgZdgcP+Bm9EIAJbmxhh+r/C6ZEdyTnmYdmWVSJev7a/N+ZpIMVWxb5SRpDac+G0MuCjNvIpeF0COr+A5saxh/mYjuc=
services:
- postgresql
script:
- RAILS_ENV=test bundle exec rake db:migrate --trace
- bundle exec rake db:test:prepare
- bundle exec rspec spec/
before_script:
- psql -c 'create database bookstore_test;' -U postgres
- psql -c "CREATE USER bookstore WITH PASSWORD 'qwerty';" -U postgres
- psql -c "GRANT ALL PRIVILEGES ON DATABASE bookstore_test TO bookstore;" -U postgres
bundler_args: "--binstubs=./bundler_stubs"
